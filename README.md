# Transaction Consumer API

Web API для создания и получения транзакций согласно техническому заданию.

## Функциональность

### POST /api/v1/Transaction
Создает новую транзакцию. Метод идемпотентный - при повторной отправке запроса с тем же Id возвращает результат предыдущего запроса.

**Запрос:**
```json
{
    "id": "1afa615f-af61-4d8a-b891-bc874c937772",
    "transactionDate": "2024-10-25T00:00:00+05:00",
    "amount": 12.34
}
```

**Ответ:**
```json
{
    "insertDateTime": "2024-10-25T12:03:34+05:00"
}
```

### GET /api/v1/Transaction?id={guid}
Получает транзакцию по Id.

**Ответ:**
```json
{
    "id": "1afa615f-af61-4d8a-b891-bc874c937772",
    "transactionDate": "2024-10-25T00:00:00+05:00",
    "amount": 12.34
}
```

## Валидация

- Сумма транзакции должна быть положительной
- Дата транзакции не может быть в будущем
- Ограничение на количество одновременно хранимых транзакций: 100 штук

## Обработка ошибок

Обработка ошибок реализована в соответствии с RFC 9457 (Problem Details for HTTP APIs).

## Технологии

- .NET 8.0
- ASP.NET Core Web API
- Entity Framework Core
- PostgreSQL

## Запуск проекта

1. Убедитесь, что у вас установлен Docker и Docker Compose
2. Клонируйте репозиторий
3. В корневой папке проекта выполните:

```bash
docker-compose up --build
```

Приложение будет доступно по адресу: http://localhost:5000

## Swagger UI

Для тестирования API доступен Swagger UI:
http://localhost:5000/swagger

При запуске через Docker Compose автоматически создается контейнер с PostgreSQL:
- Хост: postgres (внутри Docker сети) или localhost (для внешних подключений)
- Порт: 5432
- База данных: transactiondb
- Пользователь: postgres
- Пароль: postgres
